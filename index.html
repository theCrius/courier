<!doctype html>
<html>

<head>
  <title>Socket.IO testing frontend</title>
  <style>
    .hoy {
      border: 1px solid blue;
      padding: 10px;
      margin: 10px;
    }

    .rico {
      border: 1px solid green;
      padding: 10px;
      margin: 10px;
    }
  </style>
</head>

<body>
  <div class="container">
    <h2>Hermes Testing Dashboard</h2>
    <div class="hoy">
      <h3>Hoy</h3>
      <button id="hoyNonRunners" type="button">Send non-runners Test</button>
      <button id="hoyRaceAbandonment" type="button">Send Race Aband. Test</button>
      <button id="hoyFixtureAbandonment" type="button">Send Fixture Aband. Test</button>
      <button id="hoyRaceDistance" type="button">Send Race Distance Test</button>
      <button id="hoyWeather" type="button">Send Weather Test</button>
      <button id="hoyGoing" type="button">Send GOING Test</button>
      <button id="hoyInspection" type="button">Send Inspection Test</button>
    </div>
    <div class="rico">
      <h3>Rico</h3>
      <p>The tests broadcast for Catterick Bridge, 1 January 2018, first race.</p>
      <button id="ricoHorseCheckin" type="button">Send horse-checkin Test</button>
      <button id="ricoHorseNonRunner" type="button">Send horse-non-runner Test</button>
      <button id="ricoRaceCheckin" type="button">Send race-checkIn Test</button>
    </div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
  <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
  <script>
    $(function() {
      function randId() {
        var text = "";
        var pool = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
        for (var i = 0; i < 5; i++) {
          text += pool.charAt(Math.floor(Math.random() * pool.length));
        }
        return text;
      }


      $('#hoyNonRunners').click(function() {
        var testId = randId();
        var payload = {
          "meta": {
            "raceId": 42713,
            "year": 2018,
            "divisionSequence": 0,
            "animalId": 2421873,
            "modifiedTimestamp": "2018-01-01 00:00:00",
            "date": "2018-03-04",
            "raceTime": "16:20:00",
            "courseName": "TEST - SOUTHWELL",
            "raceName": "TEST - THE BETWAY STAYERS \"RATED 57-76\" HANDICAP STAKES (CLASS 4) 69171",
            "animalName": "Mambo Dancer"
          },
          "data": {
            "declaredDate": "2018-01-01",
            "declaredTime": "00:00:00",
            "declaredReason": "Reasons Reasons Reasons",
            "saddleClothNumber": 1,
            "drawNumber": 1,
            "entryColourCode": "031609011600011600",
            "entryColourDescription": "ROYAL BLUE, LIGHT GREEN epaulets."
          }
        };
        var socket = io('http://localhost:4001/hoy');
        setTimeout(function() {
          socket.emit('update:entry-non-runners', payload);
          socket.disconnect();
          // window.alert('Test ' + testId + ' sent to Hoy');
        }, 500);
        return false;
      });

      $('#hoyRaceAbandonment').click(function() {
        var testId = randId();
        var payload = {
          "meta": {
            "raceId": 1686,
            "year": 2018,
            "divisionSequence": 0,
            "fixtureId": 632,
            "modifiedTimestamp": "2018-03-14 16:54:48",
            "date": "2018-03-14",
            "courseName": "CHELTENHAM",
            "raceName": "Test Race Name www.somethingsomething.com yadayada 23452",
            "raceTime": "13:30:00"
          },
          "data": {
            "value": 4
          }
        };
        var socket = io('http://localhost:4001/hoy');
        setTimeout(function() {
          socket.emit('update:entry-race-abandonment', payload);
          socket.disconnect();
          // window.alert('Test ' + testId + ' sent to Hoy');
        }, 500);
        return false;
      });

      $('#hoyFixtureAbandonment').click(function() {
        var testId = randId();
        var payload = {
          "meta": {
            "fixtureId": 632,
            "year": 2018,
            "modifiedTimestamp": "2018-03-14 16:51:33",
            "date": "2018-03-14",
            "courseName": "CHELTENHAM"
          },
          "data": {
            "value": 3,
            "abandonedWhen": 2,
            "comment": "abandoned text"
          }
        };
        var socket = io('http://localhost:4001/hoy');
        setTimeout(function() {
          socket.emit('update:entry-fixture-abandonment', payload);
          socket.disconnect();
          // window.alert('Test ' + testId + ' sent to Hoy');
        }, 500);
        return false;
      });

      $('#hoyRaceDistance').click(function() {
        var testId = randId();
        var payload = {
          "meta": {
            "raceId": 1685,
            "year": 2018,
            "divisionSequence": 0,
            "fixtureId": 632,
            "modifiedTimestamp": "2018-03-14 14:52:13",
            "date": "2018-03-14",
            "courseName": "CHELTENHAM",
            "raceName": "Test Race Name www.somethingsomething.com yadayada 23452",
            "raceTime": "13:30:00"
          },
          "data": {
            "value": 3,
            "raceDistanceText": "3m 80y",
            "raceDistanceValue": 5360
          }
        };
        var socket = io('http://localhost:4001/hoy');
        setTimeout(function() {
          socket.emit('update:entry-race-distance', payload);
          socket.disconnect();
          // window.alert('Test ' + testId + ' sent to Hoy');
        }, 500);
        return false;
      });

      $('#hoyWeather').click(function() {
        var testId = randId();
        var payload = {
          "meta": {
            "fixtureId": 632,
            "year": 2018,
            "modifiedTimestamp": "2018-03-14 10:15:08",
            "date": "2018-03-14",
            "courseName": "CHELTENHAM"
          },
          "data": {
            "value": "wi-tornado",
            "comment": "weather text"
          }
        };
        var socket = io('http://localhost:4001/hoy');
        setTimeout(function() {
          socket.emit('update:entry-weather', payload);
          socket.disconnect();
          // window.alert('Test ' + testId + ' sent to Hoy');
        }, 500);
        return false;
      });

      $('#hoyGoing').click(function() {
        var testId = randId();
        var payload = {
          "meta": {
            "fixtureId": 632,
            "year": 2018,
            "raceId": 1685,
            "divisionSequence": 0,
            "trackId": null,
            "modifiedTimestamp": "2018-03-14 09:50:16",
            "date": "2018-03-14",
            "courseName": "CHELTENHAM",
            "raceName": "Test Race Name www.somethingsomething.com yadayada 23452",
            "raceTime": "13:30:00"
          },
          "data": {
            "ground": {
              "value": 2,
              "comment": "ground condition text"
            },
            "places": {
              "value": 2,
              "comment": "comment ground in places text"
            },
            "going": {
              "value": "2.0",
              "updatedAt": "2018-03-14 11:45:00",
              "available": 1,
              "comment": "going text"
            },
            "watering": {
              "value": "watering text",
              "status": "Watering (In Progress)"
            }
          }
        };
        var socket = io('http://localhost:4001/hoy');
        setTimeout(function() {
          socket.emit('update:entry-ground-conditions', payload);
          socket.disconnect();
          // window.alert('Test ' + testId + ' sent to Hoy');
        }, 500);
        return false;
      });

      $('#hoyInspection').click(function() {
        var testId = randId();
        var payload = {
          "meta": {
            "fixtureId": 632,
            "year": 2018,
            "modifiedTimestamp": "2018-03-14 09:53:23",
            "date": "2018-03-14",
            "courseName": "CHELTENHAM"
          },
          "data": {
            "value": "inspection text",
            "preCautionary": 1,
            "inspectedAt": "2018-03-14 11:45:00",
            "status": 1
          }
        };
        var socket = io('http://localhost:4001/hoy');
        setTimeout(function() {
          socket.emit('update:entry-inspection', payload);
          socket.disconnect();
          // window.alert('Test ' + testId + ' sent to Hoy');
        }, 500);
        return false;
      });

      $('#ricoHorseCheckin').click(function() {
        var testId = randId();
        var payload = {
          "year": 2018,
          "raceId": 1486,
          "divisionSequence": 0,
          "animalId": 2309095,
          "checkedIn": "2018-01-01 00:00:00",
          "manualCheckIn": null,
          "nonRunner": null
        };
        var socket = io('http://localhost:4001/rico');
        setTimeout(function() {
          socket.emit('update:runner-info', payload);
          socket.disconnect();
          // window.alert('Test ' + testId + ' sent to Rico');
        }, 500);
        return false;
      });

      $('#ricoHorseNonRunner').click(function() {
        var testId = randId();
        var payload = {
          "year": 2018,
          "raceId": 1486,
          "divisionSequence": 0,
          "animalId": 2309095,
          "checkedIn": null,
          "manualCheckIn": null,
          "nonRunner": true
        };
        var socket = io('http://localhost:4001/rico');
        setTimeout(function() {
          socket.emit('update:runner-info', payload);
          socket.disconnect();
          // window.alert('Test ' + testId + ' sent to Rico');
        }, 500);
        return false;
      });

      $('#ricoRaceCheckin').click(function() {
        var testId = randId();
        var payload = {
          "year": 2018,
          "raceId": 1486,
          "divisionSequence": 0,
          "checkedIn": "2018-01-01 00:00:00"
        };
        var socket = io('http://localhost:4001/rico');
        setTimeout(function() {
          socket.emit('update:runner-info', payload);
          socket.disconnect();
          // window.alert('Test ' + testId + ' sent to Rico');
        }, 500);
        return false;
      });

    });
  </script>
</body>

</html>
